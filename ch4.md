# ch4 재사용 : 상속보단 조립

- 객체 지향의 주요 특징으로 재사용을 말하면서 그 예로 상속을 드는 경우가 있다
- 상속을 사용하면 상위 클래스에 구현된 기을 그대로 재사용할 수 있기 때문에, 상속을 사용하면 재사용을 쉽게 할 수 있는 것은 분명하다
- 하지만, 상속을 사용할 경우 몇 가지 문제점이 존재한다
- ch4 에서는 상속을 통한 재사용 과정에서 발생할 수 있는 문제점을 살펴보고, 다른 재사용 방법인 객체 조립을 통해 상속을 통한 재사용의 단점을 해소하는 방법을 공부한다
***
<br>

## < 상속과 재사용 >

- ### < 상속을 통한 재사용의 단점 >
-  ####   :one: 상위 클래스 변경의 어려움
어떤 클래스를 상속받는다는 것은 그 클래스에 의존하고 있다는 뜻이다
따라서 의존하는 클래스의 코드가 변경되면 영향을 받을 수 있다
A 클래스를 B가 상속받고, B 클래스를 C가 상속받는 것처럼 계층도가 커질수록 상위 클래스의 변경이 어려워진다
-> 상속 계층을 따라 상위 클래스의 변경이 하위 클래스에 영향을 주기 때문이다
최악의 경우 상위 클래스의 변화가 모든 하위 클래스에 영향을 줄 수 있다
<br>

- #### :two: 클래스의 불필요한 증가
- 유사한 기능을 확장하는 과정에서 클래스의 개수가 불필요하게 증가할 수 있다
다중 상속을 할 수 없으므로, 상속받을 수 있는 클래스의 개수 (부모의 개수) 가 제한된다
즉, 제한된 상속을 받아햐할 수 밖에 없으므로, 이미 구현된 클래스들이 있음에도 불구하고, 다시 구현해야하는 상황이 발생하며 이는 클래스의 불필요한 증가로 이어진다
<br>

- #### :three: 상속의 오용
- 상속은 IS-A 관계가 성립할 때에만 사용해야 한다!!
- 기능 상 같은 종류가 아닌 클래스의 구현을 재사용하기 위해 상속을 받게 되면, 잘못된 사용으로 인한 문제가 발생한다

***

<br>

## < 조립을 이용한 재사용 >

- 객체 조립(composition)은 여러 객체를 묶어서 더 복잡한 기능을 제공하는 객체를 만들어내는 것이다
- 한 객체가 다른 객체를 조립해서 필드로 가진다 -> 다른 객체의 기능을 사용
- 기능을 재사용하고 싶은 클래스가 있다면 기능을 제공하는 클래스를 필요한 시점에 생성해서 사용하는 방식
```java
public class FlowController {

  private Encryptor encryptor = new Encryptor(); //필드로 조립 -> 의존성?
  
  public void process() {
    ...
    byte[] encryptedData = encryptor.ecrypt(data):
    ...
  }
}
```
- FlowController는 Encryptor에 의존 -> Encryptor 생성 방식이 변경되면 FlowController도 영향 -> 의존성 주입으로 개선? 
<br>

- 상속을 사용하다 보면 변경의 관점에서 유연함이 떨어질 가능성이 높으니 객체 조립을 먼저 생각해보기
<br>

## < 위임 >
- 위임은 내가 할 일을 다른 객체에게 넘긴다는 의미
- 보통 조립 방식을 이용해서 위임을 구현

```java
public class MyController {

    MyRepository myRepository; // has a 관계

    public void save() {
        myRepository.save();   // myRepository에게 save 권한을 위임에서 처리
    }
}
```
<br>

## < 상속은 언제 사용? >
- 조립이 재사용이라는 관점에 초점을 맞췄다면, 상속은 기능의 확장이라는 관점에 집중한다
- 또한 명확한 IS-A 관계가 성립되어야 한다  ex> 대표적으로 안드로이드 UI 위젯

- 상위 클래스의 기본적인 기능을 그대로 유지하며, 하위 클래스에서 기능을 확장해 나간다
- 단, 최초에 명확한 IS-A 관계로 보여 상속을 이용해 기능을 확장했다고 해도 이후 클래스의 개수가 불필요하게 증가하는 문제가 발생하거나 상위 클래스의 변경이 어려워지는 등 상위 클래스를 상속받을 때의 단점이 발생한다면, 조립으로 전환하는 것을 고려해야 한다


